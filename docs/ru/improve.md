# –ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é


## üìã Table of Contents

  - [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
  - [üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
    - [1. –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript –≤ production build](#1-–æ—Ç–∫–ª—é—á–µ–Ω–∞-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ç–∏–ø–æ–≤-typescript-–≤-production-build)
    - [2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ System.out.println –≤–º–µ—Å—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](#2-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-systemoutprintln-–≤–º–µ—Å—Ç–æ-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
    - [3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ organizationId –≤ Inventory](#3-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ-organizationid-–≤-inventory)
  - [üü† –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–≤–∞–∂–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
    - [4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –≤ DTOs](#4-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-–≤–∞–ª–∏–¥–∞—Ü–∏–∏-–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª-–≤-dtos)
    - [5. N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö](#5-n1-–ø—Ä–æ–±–ª–µ–º–∞-–≤-–∑–∞–ø—Ä–æ—Å–∞—Ö)
    - [6. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Inventory (1196 —Å—Ç—Ä–æ–∫)](#6-–º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-inventory-1196-—Å—Ç—Ä–æ–∫)
    - [7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É Frontend –∏ Backend](#7-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-—Ç–∏–ø–∏–∑–∞—Ü–∏–∏-–º–µ–∂–¥—É-frontend-–∏-backend)
    - [8. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#8-–Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
    - [9. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –∫–∞–∂–¥–æ–º –º–µ—Ç–æ–¥–µ](#9-—Ä—É—á–Ω–∞—è-–ø—Ä–æ–≤–µ—Ä–∫–∞-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–≤-–∫–∞–∂–¥–æ–º-–º–µ—Ç–æ–¥–µ)
    - [10. Hardcoded —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π](#10-hardcoded-—Å—Ç—Ä–æ–∫–∏-–¥–ª—è-—Ç–∏–ø–æ–≤-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
  - [üü° –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–ø—Ä–æ–±–ª–µ–º—ã-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–∏-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
    - [11. –°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ SalesService](#11-—Å–º–µ—à–µ–Ω–∏–µ-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏-–≤-salesservice)
    - [12. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏](#12-–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π-—Ä–∞—Å—á–µ—Ç-–≤—ã—Ä—É—á–∫–∏)
    - [13. –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ production](#13-–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-–∫–æ–¥-–≤-production)
    - [14. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏](#14-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Å—Ç—Ä–æ–∫–æ–≤—ã—Ö-–∫–ª—é—á–µ–π-–¥–ª—è-–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏)
    - [15. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ Frontend](#15-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-–≤–∞–ª–∏–¥–∞—Ü–∏–∏-–≤-frontend)
    - [16. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ race conditions](#16-–Ω–µ—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏-race-conditions)
    - [17. –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ organizationId –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ](#17-–ø—É–±–ª–∏—á–Ω—ã–π-–¥–æ—Å—Ç—É–ø-–∫-organizationid-–≤-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ)
    - [18. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](#18-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
    - [19. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ](#19-–Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ-–∑–∞–ø—Ä–æ—Å—ã-–≤-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ)
    - [20. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è](#20-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
  - [üü¢ –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞](#—É–ª—É—á—à–µ–Ω–∏—è-–∫–∞—á–µ—Å—Ç–≤–∞-–∫–æ–¥–∞)
    - [21. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Optional](#21-–Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-optional)
    - [22. –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏](#22-–º–∞–≥–∏—á–µ—Å–∫–∏–µ-—á–∏—Å–ª–∞-–∏-—Å—Ç—Ä–æ–∫–∏)
    - [23. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API](#23-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏-api)
    - [24. –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ happy path](#24-—Ç–µ—Å—Ç—ã-–ø–æ–∫—Ä—ã–≤–∞—é—Ç-—Ç–æ–ª—å–∫–æ-happy-path)
    - [25. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞](#25-–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ-–º–µ—Ç—Ä–∏–∫-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
  - [üìã –†–µ–∑—é–º–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤](#—Ä–µ–∑—é–º–µ-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤)
    - [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–∏—Å–ø—Ä–∞–≤–∏—Ç—å-–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
    - [–í—ã—Å–æ–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):](#–≤—ã—Å–æ–∫–∏–µ-–∏—Å–ø—Ä–∞–≤–∏—Ç—å-–≤-–±–ª–∏–∂–∞–π—à–µ–µ-–≤—Ä–µ–º—è)
    - [–°—Ä–µ–¥–Ω–∏–µ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç):](#—Å—Ä–µ–¥–Ω–∏–µ-–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å-–Ω–∞-—Å–ª–µ–¥—É—é—â–∏–π-—Å–ø—Ä–∏–Ω—Ç)
    - [–ù–∏–∑–∫–∏–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):](#–Ω–∏–∑–∫–∏–µ-–º–æ–∂–Ω–æ-–æ—Ç–ª–æ–∂–∏—Ç—å)
  - [üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–≤–Ω–µ–¥—Ä–µ–Ω–∏—é)

---



## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –ø—Ä–æ–µ–∫—Ç–∞ Borsibaar –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞, –ø—Ä–æ–±–ª–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript –≤ production build

**–§–∞–π–ª:** `frontend/next.config.ts`

```typescript
typescript: {
    ignoreBuildErrors: true,
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** TypeScript –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ runtime –æ—à–∏–±–∫–∞–º –≤ production.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±—Ä–∞—Ç—å `ignoreBuildErrors: true` –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º TypeScript.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ System.out.println –≤–º–µ—Å—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª—ã:**
- `backend/src/main/java/com/borsibaar/controller/InventoryController.java` (—Å—Ç—Ä–æ–∫–∏ 47-49)
- `backend/src/main/java/com/borsibaar/controller/OrganizationController.java` (—Å—Ç—Ä–æ–∫–∞ 38)
- `backend/src/main/java/com/borsibaar/jobs/PriceCorrectionJob.java` (—Å—Ç—Ä–æ–∫–∏ 32, 36, 88)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `System.out.println` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ
- –ù–µ–ª—å–∑—è —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤ production
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ SLF4J/Logback —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `@Slf4j` –æ—Ç Lombok:
```java
@Slf4j
public class InventoryController {
    log.debug("Received request: {}", request);
    log.info("Processing stock addition for product: {}", request.productId());
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### 3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ organizationId –≤ Inventory

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/entity/Inventory.java`

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- `Inventory` —Ö—Ä–∞–Ω–∏—Ç `organizationId`, —Ö–æ—Ç—è –æ–Ω —É–∂–µ –µ—Å—Ç—å –≤ `Product`
- –ü–æ–º–µ—Ç–∫–∞ `@Deprecated` –∏ TODO, –Ω–æ –ø–æ–ª–µ –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –†–∏—Å–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
1. –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ `organizationId` –∏–∑ `Inventory`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `inventory.getProduct().getOrganizationId()` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
3. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
4. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Liquibase –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

## üü† –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –≤ DTOs

**–§–∞–π–ª—ã:** –†–∞–∑–ª–∏—á–Ω—ã–µ DTOs

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `ProductRequestDto` –∏–º–µ–µ—Ç –±–∞–∑–æ–≤—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `minPrice <= basePrice <= maxPrice`
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö DTOs
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–∞–∑—É–º–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0.0001)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```java
public record ProductRequestDto(
    @NotBlank String name,
    @NotNull @DecimalMin("0.01") BigDecimal currentPrice,
    @NotNull @DecimalMin("0.01") BigDecimal minPrice,
    @NotNull @DecimalMin("0.01") BigDecimal maxPrice,
    @NotNull Long categoryId
) {
    @AssertTrue(message = "minPrice must be <= currentPrice <= maxPrice")
    public boolean isValidPriceRange() {
        return minPrice.compareTo(currentPrice) <= 0 
            && currentPrice.compareTo(maxPrice) <= 0;
    }
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 5. N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/InventoryService.java` (—Å—Ç—Ä–æ–∫–∏ 54-84)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```java
inventories.stream()
    .map(inv -> {
        Product product = productRepository.findById(inv.getProductId())
            .orElse(null); // N+1 –∑–∞–ø—Ä–æ—Å!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@EntityGraph` –∏–ª–∏ JOIN FETCH –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ò–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å Map

```java
@Query("SELECT i FROM Inventory i JOIN FETCH i.product WHERE i.organizationId = :orgId")
List<Inventory> findByOrganizationIdWithProduct(@Param("orgId") Long orgId);
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 6. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Inventory (1196 —Å—Ç—Ä–æ–∫)

**–§–∞–π–ª:** `frontend/app/(protected)/(sidebar)/inventory/page.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û–¥–∏–Ω —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º
- –°–º–µ—à–∞–Ω—ã: data fetching, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ñ–æ—Ä–º—ã
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ú–Ω–æ–≥–æ `@ts-expect-error` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞:
- `hooks/useInventory.ts` - –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- `components/inventory/InventoryTable.tsx` - —Ç–∞–±–ª–∏—Ü–∞
- `components/inventory/ProductForm.tsx` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
- `components/inventory/StockModal.tsx` - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- `types/inventory.ts` - —Ç–∏–ø—ã (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å shared types)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É Frontend –∏ Backend

**–ü—Ä–æ–±–ª–µ–º–∞:**
- TypeScript —Ç–∏–ø—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –≤—Ä—É—á–Ω—É—é –∏ –º–æ–≥—É—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ú–Ω–æ–≥–æ `@ts-expect-error` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (15+ –º–µ—Å—Ç)
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–∞–≤–¥—ã –¥–ª—è —Ç–∏–ø–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å TypeScript —Ç–∏–ø—ã –∏–∑ OpenAPI/Swagger —Å—Ö–µ–º—ã
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `springdoc-openapi` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `openapi-typescript` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
4. –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å shared package —Å —Ç–∏–ø–∞–º–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 8. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ResponseStatusException`
- –î—Ä—É–≥–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- Frontend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ error boundary –≤ React

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- Backend: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ `ApiExceptionHandler`
- Frontend: —Å–æ–∑–¥–∞—Ç—å `ErrorBoundary` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –µ–¥–∏–Ω—ã–π `useErrorHandler` hook
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å toast notifications –¥–ª—è –æ—à–∏–±–æ–∫

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 9. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –∫–∞–∂–¥–æ–º –º–µ—Ç–æ–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –º–µ—Ç–æ–¥ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `organizationId`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–°–æ–∑–¥–∞—Ç—å AOP –∞—Å–ø–µ–∫—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Spring Security –º–µ—Ç–æ–¥-level security:
```java
@PreAuthorize("hasPermission(#productId, 'Product', 'READ')")
public ProductResponseDto getById(Long productId) { ... }
```

–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π:
```java
protected void validateOrganizationAccess(Long organizationId, Long resourceOrgId) {
    if (!organizationId.equals(resourceOrgId)) {
        throw new ForbiddenException("Access denied");
    }
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 10. Hardcoded —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–§–∞–π–ª—ã:** –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

**–ü—Ä–æ–±–ª–µ–º–∞:**
```java
transaction.setTransactionType("SALE");
transaction.setTransactionType("PURCHASE");
transaction.setTransactionType("ADJUSTMENT");
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å enum:
```java
public enum TransactionType {
    SALE, PURCHASE, ADJUSTMENT, RETURN, 
    TRANSFER_IN, TRANSFER_OUT, INITIAL
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

## üü° –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 11. –°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ SalesService

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/SalesService.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `SalesService` —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –õ–æ–≥–∏–∫–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –º–µ–∂–¥—É `SalesService` –∏ `PriceCorrectionJob`
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å `PricingService`:
```java
@Service
public class PricingService {
    public BigDecimal calculatePriceAfterSale(
        Product product, 
        BigDecimal currentPrice, 
        Organization org
    ) {
        if (!product.getCategory().isDynamicPricing()) {
            return currentPrice;
        }
        BigDecimal newPrice = currentPrice.add(org.getPriceIncreaseStep());
        return newPrice.min(product.getMaxPrice());
    }
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 12. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/InventoryService.java` (—Å—Ç—Ä–æ–∫–∏ 458-479)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```java
private BigDecimal calculateTotalRevenue(List<InventoryTransaction> transactions) {
    return transactions.stream()
        .map(transaction -> {
            return inventoryRepository.findById(transaction.getInventoryId())
                .flatMap(inventory -> productRepository.findById(inventory.getProductId()))
                .map(product -> {
                    // N+1 –∑–∞–ø—Ä–æ—Å—ã!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JOIN –≤ –∑–∞–ø—Ä–æ—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `priceBefore` –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—É–∂–µ –µ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 13. –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ production

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/SalesService.java` (—Å—Ç—Ä–æ–∫–∏ 74-80)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª–µ–Ω –∏–ª–∏ –æ–±—ä—è—Å–Ω–µ–Ω

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ git history

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

### 14. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/InventoryService.java` (—Å—Ç—Ä–æ–∫–∏ 305-312)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```java
return userId.toString() + "|" + (stationId != null ? stationId.toString() : "null");
// –ü–æ—Ç–æ–º –ø–∞—Ä—Å–∏–Ω–≥ –æ–±—Ä–∞—Ç–Ω–æ
String[] parts = entry.getKey().split("\\|");
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á:
```java
record UserStationKey(UUID userId, Long stationId) {}

Map<UserStationKey, List<InventoryTransaction>> transactionsByKey = 
    transactions.stream()
        .collect(Collectors.groupingBy(t -> 
            new UserStationKey(t.getCreatedBy(), t.getBarStationId())
        ));
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

### 15. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ Frontend

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–æ—Ä–º—ã –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–Ω—ã, –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –∏ —Ç.–¥.
- –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-hook-form` —Å `zod` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `yup` –¥–ª—è —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 16. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ race conditions

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤–æ–∑–º–æ–∂–Ω—ã race conditions
- –ù–µ—Ç –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (optimistic locking)
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–º—É –æ—Å—Ç–∞—Ç–∫—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å `@Version` –≤ `Inventory`:
```java
@Version
private Long version;
```

–ò –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `OptimisticLockingFailureException` –≤ —Å–µ—Ä–≤–∏—Å–µ.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### 17. –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ organizationId –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/controller/InventoryController.java` (—Å—Ç—Ä–æ–∫–∏ 24-34)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```java
@RequestParam(required = false) Long organizationId
// –ï—Å–ª–∏ organizationId is provided, use it (for public access)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ï—Å–ª–∏ —ç—Ç–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint `/api/public/inventory`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –¥—Ä—É–≥–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 18. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ (JSON —Ñ–æ—Ä–º–∞—Ç)
- –ù–µ—Ç correlation IDs –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å structured logging (–Ω–∞–ø—Ä–∏–º–µ—Ä, Logstash JSON encoder)
- –î–æ–±–∞–≤–∏—Ç—å MDC –¥–ª—è correlation ID
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 19. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

**–§–∞–π–ª:** `backend/src/main/java/com/borsibaar/service/InventoryService.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `getUserSalesStats` –∏ `getStationSalesStats` –¥–µ–ª–∞—é—Ç –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º —Å JOIN

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–°–æ–∑–¥–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@EntityGraph`:
```java
@Query("SELECT t FROM InventoryTransaction t " +
       "JOIN FETCH t.inventory i " +
       "JOIN FETCH i.product p " +
       "WHERE t.transactionType = 'SALE' AND p.organizationId = :orgId")
List<InventoryTransaction> findSalesWithDetails(@Param("orgId") Long orgId);
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

### 20. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å Spring Cache:
```java
@Cacheable("categories")
public List<CategoryResponseDto> getAllByOrg(Long organizationId) { ... }
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

## üü¢ –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### 21. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Optional

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Optional.ofNullable().orElse()`
- –í –¥—Ä—É–≥–∏—Ö - –ø—Ä—è–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∏–ª—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å nullable –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

### 22. –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `"SALE-" + System.currentTimeMillis()` - —Ñ–æ—Ä–º–∞—Ç ID
- `"REDUCE-" + System.currentTimeMillis()` - —Ñ–æ—Ä–º–∞—Ç reference ID
- –ù–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è —ç—Ç–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```java
public class TransactionConstants {
    public static final String SALE_ID_PREFIX = "SALE-";
    public static final String REDUCE_ID_PREFIX = "REDUCE-";
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

### 23. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å API –±–µ–∑ —á—Ç–µ–Ω–∏—è –∫–æ–¥–∞
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å `springdoc-openapi`:
```java
@Operation(summary = "Add stock to inventory")
@ApiResponses(value = {
    @ApiResponse(responseCode = "201", description = "Stock added"),
    @ApiResponse(responseCode = "404", description = "Product not found")
})
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 24. –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ happy path

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–∞–ª–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ concurrent access
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ edge cases

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Å—Ç–∞—Ç–∫–æ–≤, –Ω–µ–≤–µ—Ä–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)
- Concurrent updates
- Edge cases (null –∑–Ω–∞—á–µ–Ω–∏—è, –≥—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 25. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ production

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å Micrometer –¥–ª—è –º–µ—Ç—Ä–∏–∫
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Prometheus/Grafana
- –î–æ–±–∞–≤–∏—Ç—å health checks

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

## üìã –†–µ–∑—é–º–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
1. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ TypeScript –≤ build
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ System.out.println
3. ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ organizationId –≤ Inventory

### –í—ã—Å–æ–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):
4. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ race conditions
5. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
6. ‚úÖ N+1 –ø—Ä–æ–±–ª–µ–º—ã –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
7. ‚úÖ –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Inventory

### –°—Ä–µ–¥–Ω–∏–µ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç):
8. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ Frontend-Backend
9. ‚úÖ –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
10. ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
11. ‚úÖ –°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
12. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ Frontend
13. ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ organizationId
14. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
15. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API
16. ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
17. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫

### –ù–∏–∑–∫–∏–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):
18. ‚úÖ Hardcoded —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
19. ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
20. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π
21. ‚úÖ –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Optional
22. ‚úÖ –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞
23. ‚úÖ –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
24. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

1. **–ù–∞—á–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º** - –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ production issues
2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ** - –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ —Å—Ä–∞–∑—É
3. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º** - –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –æ–±–Ω–æ–≤–ª—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
5. **Code review** - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å review

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –æ—Ç 2025-01-13*
