# –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Borsibaar


## üìã Table of Contents

  - [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
  - [–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–¥–æ–º–µ–Ω–Ω—ã–µ-—Å—É—â–Ω–æ—Å—Ç–∏)
    - [1. Organization (–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)](#1-organization-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)
    - [2. User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)](#2-user-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    - [3. Category (–ö–∞—Ç–µ–≥–æ—Ä–∏—è)](#3-category-–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
    - [4. Product (–ü—Ä–æ–¥—É–∫—Ç)](#4-product-–ø—Ä–æ–¥—É–∫—Ç)
    - [5. Inventory (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å)](#5-inventory-–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å)
    - [6. InventoryTransaction (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è)](#6-inventorytransaction-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è-–∏–Ω–≤–µ–Ω—Ç–∞—Ä—è)
    - [7. BarStation (–ë–∞—Ä–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è)](#7-barstation-–±–∞—Ä–Ω–∞—è-—Å—Ç–∞–Ω—Ü–∏—è)
  - [–û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã)
    - [1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](#1-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-–∏-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
    - [2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏](#2-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏)
    - [3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º](#3-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º)
    - [4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ](#4-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ-—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
    - [5. –ü—Ä–æ–¥–∞–∂–∏ (POS)](#5-–ø—Ä–æ–¥–∞–∂–∏-pos)
    - [6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞—Ä–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏](#6-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–±–∞—Ä–Ω—ã–º–∏-—Å—Ç–∞–Ω—Ü–∏—è–º–∏)
    - [7. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å](#7-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞-–∏-–æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å)
    - [8. –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π](#8-–∏—Å—Ç–æ—Ä–∏—è-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
  - [–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
    - [1. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å](#1-–º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å)
    - [2. –û—Å—Ç–∞—Ç–∫–∏](#2-–æ—Å—Ç–∞—Ç–∫–∏)
    - [3. –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ](#3-—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
    - [4. –ü—Ä–æ–¥—É–∫—Ç—ã](#4-–ø—Ä–æ–¥—É–∫—Ç—ã)
    - [5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏](#5-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
    - [6. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏](#6-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
  - [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
    - [1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä](#1-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
    - [2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–±–∞—Ä–º–µ–Ω)](#2-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–±–∞—Ä–º–µ–Ω)
    - [3. –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è](#3-–º–µ–Ω–µ–¥–∂–µ—Ä-–∏–Ω–≤–µ–Ω—Ç–∞—Ä—è)
  - [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)

---



## –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º/–∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –¥–ª—è –±–∞—Ä–æ–≤/—Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ —Å –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π. –ö–∞–∂–¥–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –±–∞—Ä–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### 1. Organization (–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)
- –ö–æ—Ä–Ω–µ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: `priceIncreaseStep`, `priceDecreaseStep`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### 2. User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth2 (Google)
- –†–æ–ª–∏: `USER`, `ADMIN`
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (`organizationId`)
- –°–≤—è–∑—å many-to-many —Å `BarStation` (–¥–æ—Å—Ç—É–ø –∫ —Å—Ç–∞–Ω—Ü–∏—è–º)

### 3. Category (–ö–∞—Ç–µ–≥–æ—Ä–∏—è)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –§–ª–∞–≥ `dynamicPricing` (–≤–∫–ª—é—á–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)

### 4. Product (–ü—Ä–æ–¥—É–∫—Ç)
- –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
- –¶–µ–Ω—ã: `basePrice`, `minPrice`, `maxPrice`
- –§–ª–∞–≥ `isActive` (soft delete)
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### 5. Inventory (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å)
- –¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É
- `quantity` (–Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- `adjustedPrice` (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ —Å —É—á–µ—Ç–æ–º –¥–∏–Ω–∞–º–∏–∫–∏)

### 6. InventoryTransaction (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è)
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ —Ü–µ–Ω
- –¢–∏–ø—ã: `SALE`, `PURCHASE`, `ADJUSTMENT`, `RETURN`, `TRANSFER_IN`, `TRANSFER_OUT`, `INITIAL`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç: `quantityBefore`, `quantityAfter`, `priceBefore`, `priceAfter`, `createdBy`, `barStationId`, `referenceId`

### 7. BarStation (–ë–∞—Ä–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è)
- –¢–æ—á–∫–∏ –ø—Ä–æ–¥–∞–∂ (POS)
- –°–≤—è–∑—å many-to-many —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂ –ø–æ —Å—Ç–∞–Ω—Ü–∏—è–º

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- OAuth2 —á–µ—Ä–µ–∑ Google
- JWT —Ç–æ–∫–µ–Ω—ã –≤ HTTP-only cookies
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- Onboarding: –ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `ADMIN`

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è —Å `quantity = 0` –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è `INITIAL`
- **–£–¥–∞–ª–µ–Ω–∏–µ**: soft delete (`isActive = false`)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (case-insensitive)

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ (`PURCHASE`)**:
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `quantity`
- –°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Ç–∏–ø–∞ `PURCHASE`
- –¶–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è

**–£–¥–∞–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ (`ADJUSTMENT`)**:
- –£–º–µ–Ω—å—à–∞–µ—Ç `quantity` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- –°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Ç–∏–ø–∞ `ADJUSTMENT` —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º `quantityChange`
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `referenceId` –∏ `notes`

**–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ (`ADJUSTMENT`)**:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `quantity`
- –°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å —Ä–∞–∑–Ω–∏—Ü–µ–π

### 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ (`SalesService.processSaleItem`)**:
- –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å `dynamicPricing = true`:
  - –¶–µ–Ω–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `organization.priceIncreaseStep`
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –Ω–µ –≤—ã—à–µ `product.maxPrice`
  - –ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `inventory.adjustedPrice`
- –ï—Å–ª–∏ `dynamicPricing = false`: —Ü–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω (`PriceCorrectionJob`)**:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (`@Scheduled(cron = "0 * * * * *")`)
- –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ –ø—Ä–æ–¥–∞–∂ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–Ω—É—Ç—É
- –°–Ω–∏–∂–∞–µ—Ç —Ü–µ–Ω—É –Ω–∞ `organization.priceDecreaseStep`
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –Ω–µ –Ω–∏–∂–µ `product.minPrice`
- –°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Ç–∏–ø–∞ `ADJUSTMENT` —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ü–µ–Ω—ã (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)

### 5. –ü—Ä–æ–¥–∞–∂–∏ (POS)

**–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–∞–∂–∏ (`SalesService.processSale`)**:
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `saleId` (—Ñ–æ—Ä–º–∞—Ç: `SALE-{timestamp}`)
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã (—Å —É—á–µ—Ç–æ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `SALE` —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º `quantityChange`
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ `barStationId` –∏ `userId`
3. –í–æ–∑–≤—Ä–∞—Ç: —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, –æ–±—â–∞—è —Å—É–º–º–∞, `saleId`

**–í–∞–ª–∏–¥–∞—Ü–∏–∏**:
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Å—Ç–∞—Ç–∫–æ–≤ ‚Üí –æ—à–∏–±–∫–∞
- –ü—Ä–æ–¥—É–∫—Ç –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω ‚Üí –æ—à–∏–±–∫–∞
- –ü—Ä–æ–¥—É–∫—Ç –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ ‚Üí –æ—à–∏–±–∫–∞ 403

### 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞—Ä–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**:
- –¢–æ–ª—å–∫–æ –¥–ª—è `ADMIN`
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (many-to-many)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–î–æ—Å—Ç—É–ø**:
- `ADMIN`: –≤–∏–¥–∏—Ç –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `USER`: –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏
- –ï—Å–ª–∏ —É `USER` –æ–¥–Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ POS

### 7. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (`getUserSalesStats`)**:
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ `userId` + `barStationId`
- –ü–æ–¥—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ (`referenceId`)
- –†–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏ (–ø–æ `basePrice`)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞–Ω—Ü–∏—è–º (`getStationSalesStats`)**:
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ `barStationId`
- –ü–æ–¥—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂
- –†–∞—Å—á–µ—Ç –æ–±—â–µ–π –≤—ã—Ä—É—á–∫–∏

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ Dashboard**:
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –ø–æ —Å—Ç–∞–Ω—Ü–∏—è–º
- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è `ADMIN`)

### 8. –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ (`getTransactionHistory`)**:
- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: —Ç–∏–ø, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, —Ü–µ–Ω—ã –¥–æ/–ø–æ—Å–ª–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –¥–∞—Ç–∞, `referenceId`, `notes`

---

## –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ `organizationId`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π

### 2. –û—Å—Ç–∞—Ç–∫–∏
- –ù–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ (CHECK constraint + –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∫–æ–¥–µ)
- –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–æ–≤

### 3. –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å `dynamicPricing = true`
- –¶–µ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã `minPrice` –∏ `maxPrice`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –±–µ–∑ –ø—Ä–æ–¥–∞–∂

### 4. –ü—Ä–æ–¥—É–∫—Ç—ã
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (case-insensitive)
- Soft delete (`isActive = false`)
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å –Ω—É–ª–µ–≤—ã–º –æ—Å—Ç–∞—Ç–∫–æ–º

### 5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –æ–¥–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- –ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `ADMIN`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∞—Ä–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π

### 6. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ (immutable)
- –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (`createdBy`) –∏ —Å—Ç–∞–Ω—Ü–∏–µ–π (`barStationId`)

---

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–≥–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞—Ä–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂

### 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–±–∞—Ä–º–µ–Ω)
- –î–æ—Å—Ç—É–ø –∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –±–∞—Ä–Ω—ã–º —Å—Ç–∞–Ω—Ü–∏—è–º
- –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ POS
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ —Ü–µ–Ω

### 3. –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å**: –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ `@Transactional`
- **–ê—É–¥–∏—Ç**: –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ `InventoryTransaction`
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≥—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, eager loading –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

---

–≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.
